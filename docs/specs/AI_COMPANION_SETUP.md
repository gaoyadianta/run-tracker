# AI陪跑功能设置指南

## 概述

RunTrack现在集成了基于Coze平台的AI语音陪跑功能，为用户提供智能的跑步陪伴体验。

## 功能特性

### 🎯 核心功能
- **实时语音播报** - 根据跑步数据自动生成个性化语音反馈
- **智能陪跑对话** - 支持用户语音输入，AI实时回应
- **专业跑步建议** - 基于配速、距离等数据提供专业指导
- **情感支持** - 提供鼓励、激励和陪伴感

### 🗣️ 播报类型
1. **鼓励激励** - 温暖的鼓励和正能量支持
2. **专业建议** - 配速调整、呼吸节奏、跑姿指导
3. **里程碑庆祝** - 每公里达成时的热烈祝贺
4. **配速提醒** - 根据配速变化的温和提醒
5. **天气提醒** - 基于天气的贴心建议
6. **训练反馈** - 跑步表现分析和下步建议

## 配置步骤

### 1. 获取Coze平台配置

#### 注册Coze账号
1. 访问 [Coze平台](https://www.coze.cn/)
2. 注册并登录账号
3. 创建新的Bot应用

#### 获取必要参数
- **Access Token**: 在Coze控制台获取API访问令牌
- **Bot ID**: 创建Bot后获得的唯一标识
- **Voice ID**: 选择的语音合成ID
- **Base URL**: API基础地址（通常为 https://api.coze.cn）

### 2. 配置应用

#### 更新strings.xml
在 `app/src/main/res/values/strings.xml` 中配置：

```xml
<!-- Coze AI配置 -->
<string name="coze_access_token">pat_your_actual_token_here</string>
<string name="coze_base_url">https://api.coze.cn</string>
<string name="coze_bot_id">your_actual_bot_id</string>
<string name="coze_voice_id">your_actual_voice_id</string>
```

#### 权限确认
确保以下权限已在AndroidManifest.xml中声明：
```xml
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.INTERNET" />
```

### 3. Bot配置建议

#### 角色设定
为你的Coze Bot设置合适的角色，例如：
```
你是一个专业且温暖的跑步教练和陪跑伙伴。你的任务是：
1. 根据用户的跑步数据提供专业建议
2. 给予用户鼓励和情感支持
3. 保持友好、积极的语调
4. 回复简洁明了，适合语音播报
5. 关注用户的安全和健康
```

#### 知识库配置
可以为Bot添加跑步相关的知识库：
- 跑步技巧和姿势指导
- 配速和训练计划
- 运动营养和恢复
- 常见跑步问题解答

## 使用方法

### 启动AI陪跑
1. 在跑步界面点击"连接"按钮
2. 等待连接成功（显示绿色状态）
3. 开始跑步，AI会自动播报

### 语音交互
1. 点击麦克风图标
2. 说出你想说的话（如"我有点累了"）
3. AI会根据你的话语和跑步状态给出回应

### 播报设置
- 默认每2分钟播报一次
- 每公里自动庆祝
- 配速变化时自动提醒
- 可通过音量按钮控制开关

## 故障排除

### 连接问题
1. **检查网络连接** - 确保设备联网
2. **验证配置** - 检查Token、Bot ID等是否正确
3. **权限确认** - 确保麦克风和网络权限已授予

### 音频问题
1. **检查音量** - 确保媒体音量已开启
2. **蓝牙设备** - 如使用蓝牙耳机，确保连接正常
3. **后台限制** - 确保应用未被系统限制后台运行

### 播报延迟
1. **网络状况** - 检查网络速度和稳定性
2. **服务器负载** - Coze服务器可能存在延迟
3. **设备性能** - 确保设备有足够的处理能力

## 最佳实践

### 跑步前准备
1. 提前连接AI陪跑服务
2. 测试语音输入功能
3. 调整合适的音量
4. 确保耳机连接稳定

### 跑步中使用
1. 专注跑步，适度互动
2. 遇到问题可语音求助
3. 注意安全，不要过度依赖
4. 享受AI陪伴的乐趣

### 跑步后反馈
1. 查看AI生成的跑步总结
2. 根据建议调整训练计划
3. 分享有趣的AI对话
4. 提供使用反馈

## 隐私和安全

### 数据保护
- 语音数据仅用于实时处理
- 跑步数据本地存储
- 不会永久保存语音记录
- 遵循相关隐私法规

### 使用建议
- 不要分享敏感个人信息
- 注意周围环境安全
- 合理使用语音功能
- 定期检查权限设置

## 更新日志

### v1.0.0
- 集成Coze WebRTC功能
- 实现基础语音播报
- 支持实时语音交互
- 添加多种播报类型
- 完成UI界面集成

## 技术支持

如遇到问题，请：
1. 查看本文档的故障排除部分
2. 检查Coze平台状态
3. 提交Issue到项目仓库
4. 联系开发团队

---

**注意**: 使用AI陪跑功能需要稳定的网络连接和有效的Coze平台配置。首次使用前请确保完成所有配置步骤。